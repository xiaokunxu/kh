{"remainingRequest":"/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/xxk/Desktop/mall/src/views/AddressEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xxk/Desktop/mall/src/views/AddressEdit.vue","mtime":1559097762000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.1.2@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport TheTitle from 'components/TheTitle.vue'\r\nimport areaList from '../assets/js/area'\r\nimport { AddressEdit, Toast } from 'vant'\r\nimport Address from '../api/address'\r\nimport { setTimeout } from 'timers';\r\n\r\nexport default {\r\n    components: {\r\n        [AddressEdit.name]: AddressEdit,\r\n        [Toast.name]: Toast,\r\n        TheTitle\r\n    },\r\n    data() {\r\n        return {\r\n            title: '',\r\n            areaList,\r\n            addressInfo: {},\r\n            showDelete: false,\r\n            addressID: ''\r\n        }\r\n    },\r\n    created(){\r\n        this.init()\r\n    },\r\n    methods: {\r\n        init(){\r\n            if(this.$route.query.name){\r\n                this.title = '编辑收货地址'\r\n                this.showDelete = true\r\n            }else{\r\n                this.title = '添加收货地址'\r\n            }\r\n            this.addressInfo.name = this.$route.query.name\r\n            this.addressInfo.tel = this.$route.query.tel\r\n            this.addressInfo.province = this.$route.query.ConsigneeProvince\r\n            this.addressInfo.city = this.$route.query.ConsigneeCity\r\n            this.addressInfo.county = this.$route.query.ConsigneeCounty\r\n            this.addressInfo.addressDetail = this.$route.query.ConsigneeAddress\r\n            this.addressInfo.postalCode = this.$route.query.ConsigneePostalcode\r\n            this.addressID = this.$route.query.addressID\r\n            if(this.$route.query.ConsigneeStatus == '0'){\r\n                this.addressInfo.isDefault = true\r\n            }else{\r\n                this.addressInfo.isDefault = false\r\n            }\r\n        },\r\n        changeDefault(value){\r\n            console.log(value)\r\n        },\r\n        onSave(content) {\r\n            if(!this.showDelete){\r\n                let postData = '[[\"UserName\",\"UserMobile\",\"ConsigneeProvince\",\"ConsigneeCity\",\"ConsigneeCounty\",\"UserAddress\",\"ConsigneePostalcode\",\"AddressStatus\"],[\"'+content.name+'\",\"'+content.tel+'\",\"'+content.province+'\",\"'+content.city+'\",\"'+content.county+'\",\"'+content.addressDetail+'\",\"'+content.postalCode+'\",\"0\"]]'\r\n                Address.UserAddressManage({\r\n                    \"SOURCE\": \"TEST\",\r\n                    \"CREDENTIALS\": \"0\",\r\n                    \"ADDRESS\": \"192.168.1.195\",\r\n                    \"TERMINAL\": \"0\",\r\n                    \"INDEX\": \"20170714\",\r\n                    \"METHOD\": \"UserAddressManage\",\r\n                    \"UserAccount\": \"test001\",\r\n                    \"Status\": \"1\",\r\n                    \"DATA\": encodeURI(postData)\r\n                }).then(res => {\r\n                    console.log(res)\r\n                    if(res.DATA[0] === 1){\r\n                        Toast.success('添加成功')\r\n                        setTimeout(() => {\r\n                            this.$router.back(-1)\r\n                        }, 2000)\r\n                    }else{\r\n                        Toast.fail('添加失败')\r\n                    }\r\n                })\r\n            }else{\r\n                let postData = '[[\"ID\",\"UserName\",\"UserMobile\",\"ConsigneeProvince\",\"ConsigneeCity\",\"ConsigneeCounty\",\"UserAddress\",\"ConsigneePostalcode\",\"AddressStatus\"],[\"'+this.addressID+'\",\"'+content.name+'\",\"'+content.tel+'\",\"'+content.province+'\",\"'+content.city+'\",\"'+content.county+'\",\"'+content.addressDetail+'\",\"'+content.postalCode+'\",\"1\"]]'\r\n                Address.UserAddressManage({\r\n                    \"SOURCE\": \"TEST\",\r\n                    \"CREDENTIALS\": \"0\",\r\n                    \"ADDRESS\": \"192.168.1.195\",\r\n                    \"TERMINAL\": \"0\",\r\n                    \"INDEX\": \"20170714\",\r\n                    \"METHOD\": \"UserAddressManage\",\r\n                    \"UserAccount\": \"test001\",\r\n                    \"Status\": \"0\",\r\n                    \"DATA\": encodeURI(postData)\r\n                }).then(res => {\r\n                    console.log(res)\r\n                    if(res.DATA[0] === 1){\r\n                        Toast.success('修改成功')\r\n                        setTimeout(() => {\r\n                            this.$router.back(-1)\r\n                        }, 2000)\r\n                    }else{\r\n                        Toast.fail('修改失败')\r\n                    }\r\n                })\r\n            }\r\n        },  \r\n        onDelete(content) {\r\n            let postData = '[[\"ID\",\"UserName\",\"UserMobile\",\"ConsigneeProvince\",\"ConsigneeCity\",\"ConsigneeCounty\",\"UserAddress\",\"ConsigneePostalcode\",\"AddressStatus\"],[\"'+this.addressID+'\",\"'+content.name+'\",\"'+content.tel+'\",\"'+content.province+'\",\"'+content.city+'\",\"'+content.county+'\",\"'+content.addressDetail+'\",\"'+content.postalCode+'\",\"1\"]]'\r\n                Address.UserAddressManage({\r\n                    \"SOURCE\": \"TEST\",\r\n                    \"CREDENTIALS\": \"0\",\r\n                    \"ADDRESS\": \"192.168.1.195\",\r\n                    \"TERMINAL\": \"0\",\r\n                    \"INDEX\": \"20170714\",\r\n                    \"METHOD\": \"UserAddressManage\",\r\n                    \"UserAccount\": \"test001\",\r\n                    \"Status\": \"2\",\r\n                    \"DATA\": encodeURI(postData)\r\n                }).then(res => {\r\n                    console.log(res)\r\n                    if(res.DATA[0] === 1){\r\n                        Toast.success('删除成功')\r\n                        setTimeout(() => {\r\n                            this.$router.back(-1)\r\n                        }, 2000)\r\n                    }else{\r\n                        Toast.fail('删除失败')\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["AddressEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddressEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"adderss-layout\">\r\n        <header class=\"address-header\">\r\n            <the-title :title=\"title\"/>\r\n        </header>\r\n        <div class=\"app-view-wrap-address\">\r\n            <van-address-edit\r\n                :area-list=\"areaList\"\r\n                :address-info=\"addressInfo\"\r\n                show-postal\r\n                :show-delete=\"showDelete\"\r\n                show-set-default\r\n                @save=\"onSave\"\r\n                @delete=\"onDelete\"\r\n                @change-default=\"changeDefault\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport TheTitle from 'components/TheTitle.vue'\r\nimport areaList from '../assets/js/area'\r\nimport { AddressEdit, Toast } from 'vant'\r\nimport Address from '../api/address'\r\nimport { setTimeout } from 'timers';\r\n\r\nexport default {\r\n    components: {\r\n        [AddressEdit.name]: AddressEdit,\r\n        [Toast.name]: Toast,\r\n        TheTitle\r\n    },\r\n    data() {\r\n        return {\r\n            title: '',\r\n            areaList,\r\n            addressInfo: {},\r\n            showDelete: false,\r\n            addressID: ''\r\n        }\r\n    },\r\n    created(){\r\n        this.init()\r\n    },\r\n    methods: {\r\n        init(){\r\n            if(this.$route.query.name){\r\n                this.title = '编辑收货地址'\r\n                this.showDelete = true\r\n            }else{\r\n                this.title = '添加收货地址'\r\n            }\r\n            this.addressInfo.name = this.$route.query.name\r\n            this.addressInfo.tel = this.$route.query.tel\r\n            this.addressInfo.province = this.$route.query.ConsigneeProvince\r\n            this.addressInfo.city = this.$route.query.ConsigneeCity\r\n            this.addressInfo.county = this.$route.query.ConsigneeCounty\r\n            this.addressInfo.addressDetail = this.$route.query.ConsigneeAddress\r\n            this.addressInfo.postalCode = this.$route.query.ConsigneePostalcode\r\n            this.addressID = this.$route.query.addressID\r\n            if(this.$route.query.ConsigneeStatus == '0'){\r\n                this.addressInfo.isDefault = true\r\n            }else{\r\n                this.addressInfo.isDefault = false\r\n            }\r\n        },\r\n        changeDefault(value){\r\n            console.log(value)\r\n        },\r\n        onSave(content) {\r\n            if(!this.showDelete){\r\n                let postData = '[[\"UserName\",\"UserMobile\",\"ConsigneeProvince\",\"ConsigneeCity\",\"ConsigneeCounty\",\"UserAddress\",\"ConsigneePostalcode\",\"AddressStatus\"],[\"'+content.name+'\",\"'+content.tel+'\",\"'+content.province+'\",\"'+content.city+'\",\"'+content.county+'\",\"'+content.addressDetail+'\",\"'+content.postalCode+'\",\"0\"]]'\r\n                Address.UserAddressManage({\r\n                    \"SOURCE\": \"TEST\",\r\n                    \"CREDENTIALS\": \"0\",\r\n                    \"ADDRESS\": \"192.168.1.195\",\r\n                    \"TERMINAL\": \"0\",\r\n                    \"INDEX\": \"20170714\",\r\n                    \"METHOD\": \"UserAddressManage\",\r\n                    \"UserAccount\": \"test001\",\r\n                    \"Status\": \"1\",\r\n                    \"DATA\": encodeURI(postData)\r\n                }).then(res => {\r\n                    console.log(res)\r\n                    if(res.DATA[0] === 1){\r\n                        Toast.success('添加成功')\r\n                        setTimeout(() => {\r\n                            this.$router.back(-1)\r\n                        }, 2000)\r\n                    }else{\r\n                        Toast.fail('添加失败')\r\n                    }\r\n                })\r\n            }else{\r\n                let postData = '[[\"ID\",\"UserName\",\"UserMobile\",\"ConsigneeProvince\",\"ConsigneeCity\",\"ConsigneeCounty\",\"UserAddress\",\"ConsigneePostalcode\",\"AddressStatus\"],[\"'+this.addressID+'\",\"'+content.name+'\",\"'+content.tel+'\",\"'+content.province+'\",\"'+content.city+'\",\"'+content.county+'\",\"'+content.addressDetail+'\",\"'+content.postalCode+'\",\"1\"]]'\r\n                Address.UserAddressManage({\r\n                    \"SOURCE\": \"TEST\",\r\n                    \"CREDENTIALS\": \"0\",\r\n                    \"ADDRESS\": \"192.168.1.195\",\r\n                    \"TERMINAL\": \"0\",\r\n                    \"INDEX\": \"20170714\",\r\n                    \"METHOD\": \"UserAddressManage\",\r\n                    \"UserAccount\": \"test001\",\r\n                    \"Status\": \"0\",\r\n                    \"DATA\": encodeURI(postData)\r\n                }).then(res => {\r\n                    console.log(res)\r\n                    if(res.DATA[0] === 1){\r\n                        Toast.success('修改成功')\r\n                        setTimeout(() => {\r\n                            this.$router.back(-1)\r\n                        }, 2000)\r\n                    }else{\r\n                        Toast.fail('修改失败')\r\n                    }\r\n                })\r\n            }\r\n        },  \r\n        onDelete(content) {\r\n            let postData = '[[\"ID\",\"UserName\",\"UserMobile\",\"ConsigneeProvince\",\"ConsigneeCity\",\"ConsigneeCounty\",\"UserAddress\",\"ConsigneePostalcode\",\"AddressStatus\"],[\"'+this.addressID+'\",\"'+content.name+'\",\"'+content.tel+'\",\"'+content.province+'\",\"'+content.city+'\",\"'+content.county+'\",\"'+content.addressDetail+'\",\"'+content.postalCode+'\",\"1\"]]'\r\n                Address.UserAddressManage({\r\n                    \"SOURCE\": \"TEST\",\r\n                    \"CREDENTIALS\": \"0\",\r\n                    \"ADDRESS\": \"192.168.1.195\",\r\n                    \"TERMINAL\": \"0\",\r\n                    \"INDEX\": \"20170714\",\r\n                    \"METHOD\": \"UserAddressManage\",\r\n                    \"UserAccount\": \"test001\",\r\n                    \"Status\": \"2\",\r\n                    \"DATA\": encodeURI(postData)\r\n                }).then(res => {\r\n                    console.log(res)\r\n                    if(res.DATA[0] === 1){\r\n                        Toast.success('删除成功')\r\n                        setTimeout(() => {\r\n                            this.$router.back(-1)\r\n                        }, 2000)\r\n                    }else{\r\n                        Toast.fail('删除失败')\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n    .app-view-wrap-address .van-cell{\r\n        text-align left \r\n        align-items center\r\n    }\r\n    .adderss-layout{\r\n        height 100vh\r\n        background #f3f3f3\r\n    }\r\n    .app-view-wrap-address{\r\n        padding-top 51px\r\n    }\r\n    .van-button--danger{\r\n        background-color #FF3947\r\n        border 1px solid #FF3947\r\n    }\r\n</style>\r\n\r\n"]}]}