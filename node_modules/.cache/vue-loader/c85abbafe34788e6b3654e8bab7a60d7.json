{"remainingRequest":"/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/xxk/Desktop/mall/src/views/AddressList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xxk/Desktop/mall/src/views/AddressList.vue","mtime":1560394066000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.1.2@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport TheTitle from 'components/TheTitle.vue'\r\nimport Address from '../api/address'\r\nimport areaList from '../assets/js/area'\r\nimport { AddressList, Toast } from 'vant'\r\n\r\nexport default {\r\n    components: {\r\n        [AddressList.name]: AddressList,\r\n        [Toast.name]: Toast,\r\n        TheTitle\r\n    },\r\n    data(){\r\n        return{\r\n            chosenAddressId: '',\r\n            addressList: [],\r\n        }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        console.log(to, from)\r\n        \r\n        if(from.path === '/order/checkout'){\r\n\r\n        }\r\n        next()\r\n    },\r\n    watch: {\r\n        // $route(to,from){\r\n        //     console.log(to, from);\r\n        // }\r\n        $route: {\r\n            deep: true,\r\n            handler(val, oldval){\r\n                console.log(val, oldval)\r\n            }\r\n        }\r\n    },\r\n    // beforeRouteEnter (to, from, next) {\r\n        // if(from.name){\r\n        //     Address.GetUserAddress({\r\n        //         \"SOURCE\": \"TEST\",\r\n        //         \"CREDENTIALS\": \"0\",\r\n        //         \"ADDRESS\": \"192.168.1.195\",\r\n        //         \"TERMINAL\": \"0\",\r\n        //         \"INDEX\": \"20170714\",\r\n        //         \"METHOD\": \"GetUserAddress\",\r\n        //         \"UserAccount\": \"test001\"\r\n        //     }).then(res => {\r\n        //         next(vm => vm.getAddressList(res))\r\n        //     })\r\n        // }\r\n    // },\r\n    created(){\r\n        this.init()\r\n    },\r\n    methods: {\r\n        // getAddressList(res){\r\n        //     console.log(res)\r\n        // },\r\n        init(){\r\n            Address.GetUserAddress({\r\n                \"SOURCE\": \"TEST\",\r\n                \"CREDENTIALS\": \"0\",\r\n                \"ADDRESS\": \"192.168.1.195\",\r\n                \"TERMINAL\": \"0\",\r\n                \"INDEX\": \"20170714\",\r\n                \"METHOD\": \"GetUserAddress\",\r\n                \"UserAccount\": \"test001\"\r\n            }).then(res => {\r\n                console.log(res.DATA[0])\r\n                let address = []\r\n                for(let i = 0; i < res.DATA[0].Address.length; i++){\r\n                    if(res.DATA[0].ConsigneeStatus[i] === 0){\r\n                        this.chosenAddressId = true\r\n                    }\r\n                    address.push({\r\n                        id: i,\r\n                        name: res.DATA[0].ConsigneeName[i],\r\n                        tel: res.DATA[0].ConsigneeTel[i],\r\n                        address: res.DATA[0].Address[i],\r\n                        ConsigneeStatus: res.DATA[0].ConsigneeStatus[i],\r\n                        ConsigneeProvince: res.DATA[0].ConsigneeProvince[i],\r\n                        ConsigneeCity: res.DATA[0].ConsigneeCity[i],\r\n                        ConsigneeCounty: res.DATA[0].ConsigneeCounty[i],\r\n                        ConsigneeAddress: res.DATA[0].ConsigneeAddress[i],\r\n                        ConsigneePostalcode: res.DATA[0].ConsigneePostalcode[i],\r\n                        RegisterTime: res.DATA[0].RegisterTime[i],\r\n                        addressID: res.DATA[0].ID[i]\r\n                    })\r\n                }\r\n                this.addressList = address\r\n                console.log(address)\r\n            })\r\n        },\r\n        onAdd() {\r\n            this.$router.push('./edit')\r\n        },\r\n        onEdit(item, index) {\r\n            this.$router.push({\r\n                name: 'AddressEdit',\r\n                query: {\r\n                    name: item.name,\r\n                    tel: item.tel,\r\n                    ConsigneeStatus: item.ConsigneeStatus,\r\n                    address: item.address,\r\n                    ConsigneeProvince: item.ConsigneeProvince,\r\n                    ConsigneeCity: item.ConsigneeCity,\r\n                    ConsigneeCounty: item.ConsigneeCounty,\r\n                    ConsigneeAddress: item.ConsigneeAddress,\r\n                    ConsigneeStatus: item.ConsigneeStatus,\r\n                    ConsigneePostalcode: item.ConsigneePostalcode,\r\n                    addressID: item.addressID\r\n                }  \r\n            })\r\n            console.log(item)\r\n        },\r\n        onSelect(item, index){\r\n            console.log(item)\r\n            Address.SetDefaultAddress({\r\n                \"SOURCE\": \"TEST\",\r\n                \"CREDENTIALS\": \"0\",\r\n                \"ADDRESS\": \"192.168.1.195\",\r\n                \"TERMINAL\": \"0\",\r\n                \"INDEX\": \"20170714\",\r\n                \"METHOD\": \"SetDefaultAddress\",\r\n                \"UserAccount\": \"test001\",\r\n                \"ID\": item.addressID\r\n            }).then(res => {\r\n                console.log(res)\r\n                if(res.DATA[0] === 1){\r\n                    Toast.success('设置成功')\r\n                    setTimeout(() => {\r\n                        this.$router.push('../user')\r\n                    }, 2000)\r\n                }else {\r\n                    Toast.success('设置失败')\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["AddressList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddressList.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"layout\">\r\n        <the-title title=\"管理收货地址\"/>\r\n        <div class=\"container\">\r\n            <!-- <div class=\"address-list\">\r\n                <ul>\r\n                    <li class=\"address-item\" v-for=\"(list, index) in addressList\" :key=\"index\">\r\n                        <div class=\"address-info\">\r\n                            <div class=\"userinfo flex\">\r\n                                <span>{{list.username}}</span>\r\n                                <span>{{list.usermobile}}</span>\r\n                            </div>\r\n                            <div class=\"detail-addresss flex\">\r\n                                <img :src=\"list.pic\" alt=\"\">\r\n                                <span>{{list.detailaddress}}</span>\r\n                            </div>\r\n                            <div class=\"address-bottom flex\">\r\n                                <div class=\"select\">\r\n                                    <span>默认地址</span>\r\n                                </div>\r\n                                <div class=\"address-btn\">\r\n                                    <span>编辑</span>\r\n                                    <span>删除</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"add-address\">\r\n                <button @click=\"toAddressEdit\">添加新地址</button>\r\n            </div> -->\r\n            <van-address-list\r\n                v-model=\"chosenAddressId\"\r\n                :list=\"addressList\"\r\n                @add=\"onAdd\"\r\n                @edit=\"onEdit\"\r\n                @select=\"onSelect\"\r\n                />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport TheTitle from 'components/TheTitle.vue'\r\nimport Address from '../api/address'\r\nimport areaList from '../assets/js/area'\r\nimport { AddressList, Toast } from 'vant'\r\n\r\nexport default {\r\n    components: {\r\n        [AddressList.name]: AddressList,\r\n        [Toast.name]: Toast,\r\n        TheTitle\r\n    },\r\n    data(){\r\n        return{\r\n            chosenAddressId: '',\r\n            addressList: [],\r\n        }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        console.log(to, from)\r\n        \r\n        if(from.path === '/order/checkout'){\r\n\r\n        }\r\n        next()\r\n    },\r\n    watch: {\r\n        // $route(to,from){\r\n        //     console.log(to, from);\r\n        // }\r\n        $route: {\r\n            deep: true,\r\n            handler(val, oldval){\r\n                console.log(val, oldval)\r\n            }\r\n        }\r\n    },\r\n    // beforeRouteEnter (to, from, next) {\r\n        // if(from.name){\r\n        //     Address.GetUserAddress({\r\n        //         \"SOURCE\": \"TEST\",\r\n        //         \"CREDENTIALS\": \"0\",\r\n        //         \"ADDRESS\": \"192.168.1.195\",\r\n        //         \"TERMINAL\": \"0\",\r\n        //         \"INDEX\": \"20170714\",\r\n        //         \"METHOD\": \"GetUserAddress\",\r\n        //         \"UserAccount\": \"test001\"\r\n        //     }).then(res => {\r\n        //         next(vm => vm.getAddressList(res))\r\n        //     })\r\n        // }\r\n    // },\r\n    created(){\r\n        this.init()\r\n    },\r\n    methods: {\r\n        // getAddressList(res){\r\n        //     console.log(res)\r\n        // },\r\n        init(){\r\n            Address.GetUserAddress({\r\n                \"SOURCE\": \"TEST\",\r\n                \"CREDENTIALS\": \"0\",\r\n                \"ADDRESS\": \"192.168.1.195\",\r\n                \"TERMINAL\": \"0\",\r\n                \"INDEX\": \"20170714\",\r\n                \"METHOD\": \"GetUserAddress\",\r\n                \"UserAccount\": \"test001\"\r\n            }).then(res => {\r\n                console.log(res.DATA[0])\r\n                let address = []\r\n                for(let i = 0; i < res.DATA[0].Address.length; i++){\r\n                    if(res.DATA[0].ConsigneeStatus[i] === 0){\r\n                        this.chosenAddressId = true\r\n                    }\r\n                    address.push({\r\n                        id: i,\r\n                        name: res.DATA[0].ConsigneeName[i],\r\n                        tel: res.DATA[0].ConsigneeTel[i],\r\n                        address: res.DATA[0].Address[i],\r\n                        ConsigneeStatus: res.DATA[0].ConsigneeStatus[i],\r\n                        ConsigneeProvince: res.DATA[0].ConsigneeProvince[i],\r\n                        ConsigneeCity: res.DATA[0].ConsigneeCity[i],\r\n                        ConsigneeCounty: res.DATA[0].ConsigneeCounty[i],\r\n                        ConsigneeAddress: res.DATA[0].ConsigneeAddress[i],\r\n                        ConsigneePostalcode: res.DATA[0].ConsigneePostalcode[i],\r\n                        RegisterTime: res.DATA[0].RegisterTime[i],\r\n                        addressID: res.DATA[0].ID[i]\r\n                    })\r\n                }\r\n                this.addressList = address\r\n                console.log(address)\r\n            })\r\n        },\r\n        onAdd() {\r\n            this.$router.push('./edit')\r\n        },\r\n        onEdit(item, index) {\r\n            this.$router.push({\r\n                name: 'AddressEdit',\r\n                query: {\r\n                    name: item.name,\r\n                    tel: item.tel,\r\n                    ConsigneeStatus: item.ConsigneeStatus,\r\n                    address: item.address,\r\n                    ConsigneeProvince: item.ConsigneeProvince,\r\n                    ConsigneeCity: item.ConsigneeCity,\r\n                    ConsigneeCounty: item.ConsigneeCounty,\r\n                    ConsigneeAddress: item.ConsigneeAddress,\r\n                    ConsigneeStatus: item.ConsigneeStatus,\r\n                    ConsigneePostalcode: item.ConsigneePostalcode,\r\n                    addressID: item.addressID\r\n                }  \r\n            })\r\n            console.log(item)\r\n        },\r\n        onSelect(item, index){\r\n            console.log(item)\r\n            Address.SetDefaultAddress({\r\n                \"SOURCE\": \"TEST\",\r\n                \"CREDENTIALS\": \"0\",\r\n                \"ADDRESS\": \"192.168.1.195\",\r\n                \"TERMINAL\": \"0\",\r\n                \"INDEX\": \"20170714\",\r\n                \"METHOD\": \"SetDefaultAddress\",\r\n                \"UserAccount\": \"test001\",\r\n                \"ID\": item.addressID\r\n            }).then(res => {\r\n                console.log(res)\r\n                if(res.DATA[0] === 1){\r\n                    Toast.success('设置成功')\r\n                    setTimeout(() => {\r\n                        this.$router.push('../user')\r\n                    }, 2000)\r\n                }else {\r\n                    Toast.success('设置失败')\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n    .layout{\r\n        height 100vh\r\n        background #f3f3f3\r\n    }\r\n    .container{\r\n        padding-top 51px\r\n        // padding-bottom 44px\r\n        // .address-list{\r\n        //     .address-item{\r\n        //         padding 0 10px\r\n        //         margin-bottom 10px\r\n        //         background #fff\r\n        //         font-size 15px\r\n        //         color #000\r\n        //         .flex{\r\n        //             display flex\r\n        //             justify-content space-between\r\n        //         }\r\n        //         span{\r\n        //             line-height 22px\r\n        //         }\r\n        //         .userinfo{\r\n        //             padding-top 15px\r\n        //             font-size 16px\r\n        //         }\r\n        //         .detail-addresss{\r\n        //             text-align left \r\n        //             padding 15px 0\r\n        //             img{\r\n        //                 width 20px\r\n        //                 height 20px\r\n        //                 margin-right 8px\r\n        //             }\r\n        //         }\r\n        //         .address-bottom{\r\n        //             align-items center\r\n        //             padding 10px 0\r\n        //             border-top 1px solid #eee\r\n        //             .address-btn span{\r\n        //                 display inline-block\r\n        //                 padding 4px 20px\r\n        //                 margin-left 20px\r\n        //                 border 1px solid #ccc\r\n        //                 border-radius 4px\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n        // .add-address{\r\n        //     position fixed\r\n        //     bottom 0\r\n        //     left 0\r\n        //     right 0\r\n        //     padding 0 10px\r\n        //     button{\r\n        //         width 100%\r\n        //         height 44px\r\n        //         line-height 44px\r\n        //         border none \r\n        //         background #FF3947\r\n        //         border-radius 30px\r\n        //         font-size 17px\r\n        //         color #fff\r\n        //     }\r\n        // }\r\n    }\r\n</style>\r\n\r\n<style lang=\"stylus\">\r\n    .van-address-item__name{\r\n        font-size 15px\r\n        margin-bottom 7px\r\n    }\r\n    .van-address-item__address{\r\n        font-size 13px\r\n        line-height 18px\r\n    }\r\n    .van-button--danger{\r\n        background #FF3947\r\n        border 1px solid #FF3947\r\n    }\r\n    .van-address-list{\r\n        padding-bottom 50px\r\n    }\r\n    .van-address-item{\r\n        margin-bottom 10px\r\n    }\r\n</style>\r\n\r\n\r\n"]}]}