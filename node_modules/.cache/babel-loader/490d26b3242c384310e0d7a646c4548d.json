{"remainingRequest":"/Users/xxk/Desktop/mall/node_modules/.2.1.2@thread-loader/dist/cjs.js!/Users/xxk/Desktop/mall/node_modules/.8.0.6@babel-loader/lib/index.js!/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/xxk/Desktop/mall/src/views/KhLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xxk/Desktop/mall/src/views/KhLogin.vue","mtime":1558950890000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.1.2@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport User from \"../api/user\";\nexport default {\n  data: function data() {\n    return {\n      isSmsLogin: true,\n      codeMsg: '获取验证码',\n      countdown: 60,\n      timer: null,\n      username: '',\n      pwd: '',\n      code: '',\n      errMsg: ''\n    };\n  },\n  computed: {\n    placeholderTxt: function placeholderTxt() {\n      return this.isSmsLogin ? '账号或手机号' : '手机号';\n    },\n    changeLogin: function changeLogin() {\n      return this.isSmsLogin ? '手机验证码登录' : '用户名密码登录';\n    }\n  },\n  watch: {\n    $route: function $route(to, from) {\n      console.log(to.path);\n    }\n  },\n  methods: {\n    changeBtn: function changeBtn() {\n      this.isSmsLogin = !this.isSmsLogin;\n    },\n    getCode: function getCode() {\n      var _this = this;\n\n      if (!this.username) {\n        this.errMsg = '请输入手机号';\n        return;\n      }\n\n      if (!this.checkMobile()) {\n        this.errMsg = '手机号码格式不正确';\n        return;\n      }\n\n      if (this.countdown !== 60) return;\n      this.timer = setInterval(function () {\n        _this.codeMsg = \"\\u91CD\\u65B0\\u53D1\\u9001\".concat(_this.countdown);\n        _this.countdown--;\n\n        if (_this.countdown === 0) {\n          clearInterval(_this.timer);\n          _this.timer = null;\n          _this.countdown = 60;\n          _this.codeMsg = '获取验证码';\n        }\n      }, 1000);\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      // 校验\n      if (this.isSmsLogin) {\n        if (!this.username) {\n          this.errMsg = '请输入账号';\n          return;\n        }\n\n        if (!this.pwd) {\n          this.errMsg = '请输入密码';\n          return;\n        }\n      } else {\n        if (!this.username) {\n          this.errMsg = '请输入手机号';\n          return;\n        }\n\n        if (!this.checkMobile()) {\n          this.errMsg = '手机号码格式不正确';\n          return;\n        }\n\n        if (!this.code) {\n          this.errMsg = '请输入短信验证码';\n          return;\n        }\n      } // let data = {\n      //     username: this.username\n      // }\n      // this.$fetch('UserInfo', {\n\n\n      User.UserLogoin({\n        \"SOURCE\": \"TEST\",\n        \"CREDENTIALS\": \"0\",\n        \"ADDRESS\": \"192.168.1.195\",\n        \"TERMINAL\": \"0\",\n        \"INDEX\": \"20170714\",\n        \"METHOD\": \"UserLogoin\",\n        \"UserAccount\": this.username,\n        \"UserPasswd\": this.pwd,\n        \"LoginIP\": \"192.168.1.195\"\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.DATA) {\n          var statu = res.DATA[0];\n\n          if (statu === 0) {\n            _this2.errMsg = '账号或密码错误';\n          } else if (statu === 1) {\n            _this2.$store.commit('changeLoginStatu', res);\n\n            var path = _this2.$route.query.redirect || '/user';\n\n            _this2.$router.push(path);\n          } else if (statu === 2) {\n            _this2.errMsg = '账号异常';\n          }\n        }\n      });\n    },\n    checkMobile: function checkMobile() {\n      if (this.username == '') {\n        this.errMsg == '手机号不能为空';\n        return;\n      }\n\n      var reg = /^((1[3-8][0-9])+\\d{8})$/;\n      return reg.test(this.username);\n    },\n    onForgetPwd: function onForgetPwd() {\n      this.$router.push('/forgetPwd');\n    },\n    goBack: function goBack() {\n      this.isSmsLogin = !this.isSmsLogin;\n    },\n    onClose: function onClose() {\n      this.$router.push('./home');\n    }\n  }\n};",{"version":3,"sources":["KhLogin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"layout\">\r\n        <header class=\"app-view-header\">\r\n            <div v-show=\"!isSmsLogin\" class=\"back\">\r\n                <img @click=\"goBack\" src=\"../assets/images/search/ic-back-b@3x.png\" alt=\"\">\r\n            </div>\r\n            <div v-show=\"isSmsLogin\" class=\"close\">\r\n                <img @click=\"onClose\" src=\"../assets/images/login/login_closed@3x.png\" alt=\"\">\r\n            </div>\r\n        </header>\r\n        <div class=\"header_tit\">\r\n            <em class=\"khlogo\"><img src=\"../assets/images/login/logo@3x.png\" alt=\"\"></em>\r\n        </div>\r\n        <div>\r\n            <!-- 输入框 -->\r\n            <!-- <label v-show=\"isSmsLogin\" class=\"login_user\">\r\n                <input type=\"text\" class=\"item_account\" autocomplete=\"off\" placeholder=\"账号或手机号\">\r\n            </label> -->\r\n            <label class=\"login_user\">\r\n                <div v-show=\"!isSmsLogin\" class=\"country_list\">\r\n                    <div class=\"countrycode_selector\">\r\n                        <span class=\"country_code\">\r\n                            <tt class=\"countrycode-value\">+86</tt>\r\n                            <i class=\"icon_arrow_down\"></i>\r\n                        </span>\r\n                    </div>\r\n                    <img src=\"../assets/images/commodity/idetails-ic-Jump-g@3x.png\" alt=\"\">\r\n                </div>\r\n                <img class=\"usericon\" v-show=\"isSmsLogin\" src=\"../assets/images/login/login_ic_account@3x.png\" alt=\"\">\r\n                <input type=\"text\" class=\"item_account\" autocomplete=\"off\" :placeholder=\"placeholderTxt\" v-model.trim=\"username\">\r\n            </label>\r\n            <label v-show=\"isSmsLogin\" class=\"pwd_panel\">\r\n                <img class=\"usericon\" src=\"../assets/images/login/login_ic_password@3x.png\" alt=\"\">\r\n                <input type=\"password\" class=\"item_account\" placeholder=\"密码\" autocomplete=\"off\" v-model.trim=\"pwd\">\r\n                <!-- <i class=\"eye pwd_eye\">eye</i> -->\r\n            </label>\r\n            <label v-show=\"!isSmsLogin\" class=\"pwd_panel\">\r\n                <input type=\"number\" class=\"item_account\" placeholder=\"短信验证码\" autocomplete=\"off\" v-model.trim=\"code\">\r\n                <a href=\"javascript:;\" class=\"sms_code\" @click=\"getCode\">{{codeMsg}}</a>\r\n            </label>\r\n            <div class=\"panel\">\r\n                <div class=\"registered\" v-show=\"isSmsLogin\">快速注册</div>\r\n                <div class=\"code-login\" @click=\"changeBtn\">{{changeLogin}}</div>\r\n            </div>\r\n            <!-- 错误信息 -->\r\n            <div v-show=\"errMsg\" class=\"err_tip\">\r\n                <!-- <em class=\"icon_error\">err</em> -->\r\n                <span class=\"error-con\">* {{errMsg}}</span>\r\n            </div>\r\n            <div class=\"btns_bg\">\r\n                <button class=\"btnadpt\" @click=\"submit\">登录</button>\r\n                <!-- <input type=\"button\" class=\"btnadpt\" value=\"登录\"> -->\r\n            </div>\r\n            <div class=\"other_panel\" v-show=\"isSmsLogin\">\r\n                <a class=\"outer-link\" @click=\"onForgetPwd\">忘记密码？</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport User from '../api/user'\r\n\r\nexport default {\r\n    data(){\r\n        return{\r\n            isSmsLogin: true,\r\n            codeMsg: '获取验证码',\r\n            countdown: 60,\r\n            timer: null,\r\n            username: '',\r\n            pwd: '',\r\n            code: '',\r\n            errMsg: '',\r\n        }\r\n    },\r\n    computed: {\r\n        placeholderTxt(){\r\n            return this.isSmsLogin ? '账号或手机号' : '手机号'\r\n        },\r\n        changeLogin(){\r\n            return this.isSmsLogin ? '手机验证码登录' : '用户名密码登录'\r\n        },\r\n    },\r\n    watch:{\r\n        $route(to,from){\r\n            console.log(to.path);\r\n        }\r\n    },\r\n    methods: {\r\n        changeBtn(){\r\n            this.isSmsLogin = !this.isSmsLogin\r\n        },\r\n        getCode(){\r\n            if(!this.username){\r\n                this.errMsg = '请输入手机号'\r\n                return\r\n            }\r\n            if(!this.checkMobile()){\r\n                this.errMsg = '手机号码格式不正确'\r\n                return\r\n            }\r\n            if(this.countdown !== 60) return\r\n            this.timer = setInterval(() => {\r\n                this.codeMsg = `重新发送${this.countdown}`\r\n                this.countdown --\r\n                if(this.countdown === 0){\r\n                    clearInterval(this.timer)\r\n                    this.timer = null\r\n                    this.countdown = 60\r\n                    this.codeMsg = '获取验证码'\r\n                }\r\n            }, 1000)\r\n        },\r\n        submit(){\r\n            // 校验\r\n            if(this.isSmsLogin){\r\n                if(!this.username){\r\n                    this.errMsg = '请输入账号'\r\n                    return\r\n                }\r\n                if(!this.pwd){\r\n                    this.errMsg = '请输入密码'\r\n                    return\r\n                }\r\n            }else{\r\n                if(!this.username){\r\n                    this.errMsg = '请输入手机号'\r\n                    return\r\n                }\r\n                if(!this.checkMobile()){\r\n                    this.errMsg = '手机号码格式不正确'\r\n                    return\r\n                }\r\n                if(!this.code){\r\n                    this.errMsg = '请输入短信验证码'\r\n                    return\r\n                }\r\n            }\r\n            // let data = {\r\n            //     username: this.username\r\n            // }\r\n            // this.$fetch('UserInfo', {\r\n            User.UserLogoin({\r\n                \"SOURCE\": \"TEST\",\r\n                \"CREDENTIALS\": \"0\",\r\n                \"ADDRESS\": \"192.168.1.195\",\r\n                \"TERMINAL\": \"0\",\r\n                \"INDEX\": \"20170714\",\r\n                \"METHOD\": \"UserLogoin\",\r\n                \"UserAccount\": this.username,\r\n                \"UserPasswd\": this.pwd,\r\n                \"LoginIP\": \"192.168.1.195\"\r\n            }).then(res => {\r\n                console.log(res)\r\n                if(res.DATA){\r\n                    let statu = res.DATA[0]\r\n                    if(statu === 0){\r\n                        this.errMsg = '账号或密码错误'\r\n                    }else if(statu === 1){\r\n                        this.$store.commit('changeLoginStatu', res)\r\n                        let path = this.$route.query.redirect || '/user'\r\n                        this.$router.push(path)\r\n                    }else if(statu === 2){\r\n                        this.errMsg = '账号异常'\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        checkMobile(){\r\n            if(this.username == ''){\r\n                this.errMsg == '手机号不能为空'\r\n                return\r\n            }\r\n            const reg = /^((1[3-8][0-9])+\\d{8})$/\r\n            return reg.test(this.username)\r\n        },\r\n        onForgetPwd(){\r\n            this.$router.push('/forgetPwd')\r\n        },\r\n        goBack(){\r\n            this.isSmsLogin = !this.isSmsLogin\r\n        },\r\n        onClose(){\r\n            this.$router.push('./home')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n    .layout{\r\n        padding: 0 28px;\r\n        position: relative;\r\n        box-sizing: border-box;\r\n    }\r\n    .app-view-header{\r\n        img{\r\n            width 20px\r\n            margin-top 18px\r\n        }\r\n        .close{\r\n            text-align right \r\n        }\r\n        .back{\r\n            text-align left \r\n        }\r\n    } \r\n    .usericon{\r\n        width 20px\r\n        margin-right 10px \r\n    }\r\n    .header_tit{\r\n        padding: 30px 0 30px;\r\n        text-align: center;\r\n    }\r\n    .khlogo{\r\n        // width: 48px;\r\n        // height: 48px;\r\n        margin: 0 auto 15px;\r\n        // display: block;\r\n        // background-image: url(../assets/images/milogo.png);\r\n        img{\r\n            width 120px\r\n            // height 100px\r\n        }\r\n    }\r\n    .login_user, .pwd_panel{\r\n        display flex\r\n        align-items center\r\n        position relative\r\n        border-bottom 1px solid #d3d3d3\r\n    }\r\n    .pwd_panel{\r\n        // justify-content: space-between;\r\n    }\r\n    .country_list{\r\n        display flex\r\n        align-items center\r\n        padding: 1px 10px 1px 0;\r\n        margin-right: 8px;\r\n        color: #4a4a4a;\r\n        // display: block;\r\n        overflow: hidden;\r\n        img{\r\n            width 8px\r\n            margin-left 6px\r\n        }\r\n    }\r\n    .countrycode_selector{\r\n        position: relative;\r\n        animation: fade-in ease-in-out .5s;\r\n    }\r\n    @keyframes fade-in{\r\n        0%{\r\n            left: -100%;\r\n        }\r\n        100%{\r\n            left: 0;\r\n        }\r\n    }\r\n    .country_code{\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n    .countrycode-value{\r\n        margin-right: 2px;\r\n        color: #939393;\r\n        font-size: 16px;\r\n    }\r\n    .panel{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        margin-top: 12px;\r\n        margin-bottom: 10px; \r\n        font-size: 14px;\r\n    }\r\n    .panel .registered{\r\n        padding: 4px 14px 4px 0;\r\n    }\r\n    .panel .code-login{\r\n        padding: 4px 0 4px 0;\r\n    }\r\n    .btns_bg{\r\n        padding-top: 24px;\r\n    }\r\n    .btnadpt{\r\n        width: 100%;\r\n        display: block;\r\n        padding: 12px 0;\r\n        // margin-bottom: 24px;\r\n        border: none;\r\n        border-top-left-radius: 25px;\r\n        border-bottom-right-radius: 25px;\r\n        box-shadow: 0 5px 20px 4px rgba(255, 57, 72, .25);\r\n        background-color: #ff3948;\r\n        text-align: center;\r\n        font-size: 18px;\r\n        color: #fff;\r\n        cursor: pointer;\r\n    }\r\n    .outer-link{\r\n        display inline-block\r\n        padding: 0 9px;\r\n        margin-top: 24px;\r\n        color: #646464;\r\n    }\r\n    .sms_code{\r\n        position absolute\r\n        right 0\r\n        padding: 6px 12px;\r\n        background: #ff3948;\r\n        border-radius: 15px;\r\n        font-size: 14px;\r\n        color: #fff;\r\n    }\r\n    .err_tip{\r\n        margin-bottom: 5px;\r\n        padding-top: 14px;\r\n        color: #F66;\r\n        text-align: left;\r\n        font-size: 14px;\r\n    }\r\n</style>\r\n"],"sourceRoot":"src/views"}]}