{"remainingRequest":"/Users/xxk/Desktop/mall/node_modules/.2.1.2@thread-loader/dist/cjs.js!/Users/xxk/Desktop/mall/node_modules/.8.0.6@babel-loader/lib/index.js!/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/xxk/Desktop/mall/src/views/AddressList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xxk/Desktop/mall/src/views/AddressList.vue","mtime":1560394066000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.1.2@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xxk/Desktop/mall/node_modules/.15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/xxk/Desktop/mall/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/address-list/style\";\nimport _AddressList from \"vant/es/address-list\";\n\nvar _components;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TheTitle from 'components/TheTitle.vue';\nimport Address from \"../api/address\";\nimport areaList from \"../assets/js/area\";\nexport default {\n  components: (_components = {}, _defineProperty(_components, _AddressList.name, _AddressList), _defineProperty(_components, _Toast.name, _Toast), _defineProperty(_components, \"TheTitle\", TheTitle), _components),\n  data: function data() {\n    return {\n      chosenAddressId: '',\n      addressList: []\n    };\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    console.log(to, from);\n\n    if (from.path === '/order/checkout') {}\n\n    next();\n  },\n  watch: {\n    // $route(to,from){\n    //     console.log(to, from);\n    // }\n    $route: {\n      deep: true,\n      handler: function handler(val, oldval) {\n        console.log(val, oldval);\n      }\n    }\n  },\n  // beforeRouteEnter (to, from, next) {\n  // if(from.name){\n  //     Address.GetUserAddress({\n  //         \"SOURCE\": \"TEST\",\n  //         \"CREDENTIALS\": \"0\",\n  //         \"ADDRESS\": \"192.168.1.195\",\n  //         \"TERMINAL\": \"0\",\n  //         \"INDEX\": \"20170714\",\n  //         \"METHOD\": \"GetUserAddress\",\n  //         \"UserAccount\": \"test001\"\n  //     }).then(res => {\n  //         next(vm => vm.getAddressList(res))\n  //     })\n  // }\n  // },\n  created: function created() {\n    this.init();\n  },\n  methods: {\n    // getAddressList(res){\n    //     console.log(res)\n    // },\n    init: function init() {\n      var _this = this;\n\n      Address.GetUserAddress({\n        \"SOURCE\": \"TEST\",\n        \"CREDENTIALS\": \"0\",\n        \"ADDRESS\": \"192.168.1.195\",\n        \"TERMINAL\": \"0\",\n        \"INDEX\": \"20170714\",\n        \"METHOD\": \"GetUserAddress\",\n        \"UserAccount\": \"test001\"\n      }).then(function (res) {\n        console.log(res.DATA[0]);\n        var address = [];\n\n        for (var i = 0; i < res.DATA[0].Address.length; i++) {\n          if (res.DATA[0].ConsigneeStatus[i] === 0) {\n            _this.chosenAddressId = true;\n          }\n\n          address.push({\n            id: i,\n            name: res.DATA[0].ConsigneeName[i],\n            tel: res.DATA[0].ConsigneeTel[i],\n            address: res.DATA[0].Address[i],\n            ConsigneeStatus: res.DATA[0].ConsigneeStatus[i],\n            ConsigneeProvince: res.DATA[0].ConsigneeProvince[i],\n            ConsigneeCity: res.DATA[0].ConsigneeCity[i],\n            ConsigneeCounty: res.DATA[0].ConsigneeCounty[i],\n            ConsigneeAddress: res.DATA[0].ConsigneeAddress[i],\n            ConsigneePostalcode: res.DATA[0].ConsigneePostalcode[i],\n            RegisterTime: res.DATA[0].RegisterTime[i],\n            addressID: res.DATA[0].ID[i]\n          });\n        }\n\n        _this.addressList = address;\n        console.log(address);\n      });\n    },\n    onAdd: function onAdd() {\n      this.$router.push('./edit');\n    },\n    onEdit: function onEdit(item, index) {\n      var _query;\n\n      this.$router.push({\n        name: 'AddressEdit',\n        query: (_query = {\n          name: item.name,\n          tel: item.tel,\n          ConsigneeStatus: item.ConsigneeStatus,\n          address: item.address,\n          ConsigneeProvince: item.ConsigneeProvince,\n          ConsigneeCity: item.ConsigneeCity,\n          ConsigneeCounty: item.ConsigneeCounty,\n          ConsigneeAddress: item.ConsigneeAddress\n        }, _defineProperty(_query, \"ConsigneeStatus\", item.ConsigneeStatus), _defineProperty(_query, \"ConsigneePostalcode\", item.ConsigneePostalcode), _defineProperty(_query, \"addressID\", item.addressID), _query)\n      });\n      console.log(item);\n    },\n    onSelect: function onSelect(item, index) {\n      var _this2 = this;\n\n      console.log(item);\n      Address.SetDefaultAddress({\n        \"SOURCE\": \"TEST\",\n        \"CREDENTIALS\": \"0\",\n        \"ADDRESS\": \"192.168.1.195\",\n        \"TERMINAL\": \"0\",\n        \"INDEX\": \"20170714\",\n        \"METHOD\": \"SetDefaultAddress\",\n        \"UserAccount\": \"test001\",\n        \"ID\": item.addressID\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.DATA[0] === 1) {\n          _Toast.success('设置成功');\n\n          setTimeout(function () {\n            _this2.$router.push('../user');\n          }, 2000);\n        } else {\n          _Toast.success('设置失败');\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["AddressList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,OAAA,QAAA,MAAA,yBAAA;AACA,OAAA,OAAA;AACA,OAAA,QAAA;AAGA,eAAA;AACA,EAAA,UAAA,kDACA,aAAA,IADA,8CAEA,OAAA,IAFA,oDAGA,QAHA,eADA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA;AAFA,KAAA;AAIA,GAXA;AAYA,EAAA,gBAZA,4BAYA,EAZA,EAYA,IAZA,EAYA,IAZA,EAYA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,EAAA,EAAA,IAAA;;AAEA,QAAA,IAAA,CAAA,IAAA,KAAA,iBAAA,EAAA,CAEA;;AACA,IAAA,IAAA;AACA,GAnBA;AAoBA,EAAA,KAAA,EAAA;AACA;AACA;AACA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,GAFA,EAEA,MAFA,EAEA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAAA,MAAA;AACA;AAJA;AAJA,GApBA;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAA,OA9CA,qBA8CA;AACA,SAAA,IAAA;AACA,GAhDA;AAiDA,EAAA,OAAA,EAAA;AACA;AACA;AACA;AACA,IAAA,IAJA,kBAIA;AAAA;;AACA,MAAA,OAAA,CAAA,cAAA,CAAA;AACA,kBAAA,MADA;AAEA,uBAAA,GAFA;AAGA,mBAAA,eAHA;AAIA,oBAAA,GAJA;AAKA,iBAAA,UALA;AAMA,kBAAA,gBANA;AAOA,uBAAA;AAPA,OAAA,EAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,YAAA,OAAA,GAAA,EAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,eAAA,CAAA,CAAA,MAAA,CAAA,EAAA;AACA,YAAA,KAAA,CAAA,eAAA,GAAA,IAAA;AACA;;AACA,UAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,EAAA,EAAA,CADA;AAEA,YAAA,IAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,aAAA,CAAA,CAAA,CAFA;AAGA,YAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,YAAA,CAAA,CAAA,CAHA;AAIA,YAAA,OAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAJA;AAKA,YAAA,eAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,eAAA,CAAA,CAAA,CALA;AAMA,YAAA,iBAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,iBAAA,CAAA,CAAA,CANA;AAOA,YAAA,aAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,aAAA,CAAA,CAAA,CAPA;AAQA,YAAA,eAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,eAAA,CAAA,CAAA,CARA;AASA,YAAA,gBAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,CAAA,CATA;AAUA,YAAA,mBAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,mBAAA,CAAA,CAAA,CAVA;AAWA,YAAA,YAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,YAAA,CAAA,CAAA,CAXA;AAYA,YAAA,SAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAA;AAZA,WAAA;AAcA;;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,OAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA,OAhCA;AAiCA,KAtCA;AAuCA,IAAA,KAvCA,mBAuCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,KAzCA;AA0CA,IAAA,MA1CA,kBA0CA,IA1CA,EA0CA,KA1CA,EA0CA;AAAA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,aADA;AAEA,QAAA,KAAA;AACA,UAAA,IAAA,EAAA,IAAA,CAAA,IADA;AAEA,UAAA,GAAA,EAAA,IAAA,CAAA,GAFA;AAGA,UAAA,eAAA,EAAA,IAAA,CAAA,eAHA;AAIA,UAAA,OAAA,EAAA,IAAA,CAAA,OAJA;AAKA,UAAA,iBAAA,EAAA,IAAA,CAAA,iBALA;AAMA,UAAA,aAAA,EAAA,IAAA,CAAA,aANA;AAOA,UAAA,eAAA,EAAA,IAAA,CAAA,eAPA;AAQA,UAAA,gBAAA,EAAA,IAAA,CAAA;AARA,sDASA,IAAA,CAAA,eATA,kDAUA,IAAA,CAAA,mBAVA,wCAWA,IAAA,CAAA,SAXA;AAFA,OAAA;AAgBA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KA5DA;AA6DA,IAAA,QA7DA,oBA6DA,IA7DA,EA6DA,KA7DA,EA6DA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,iBAAA,CAAA;AACA,kBAAA,MADA;AAEA,uBAAA,GAFA;AAGA,mBAAA,eAHA;AAIA,oBAAA,GAJA;AAKA,iBAAA,UALA;AAMA,kBAAA,mBANA;AAOA,uBAAA,SAPA;AAQA,cAAA,IAAA,CAAA;AARA,OAAA,EASA,IATA,CASA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,EAAA;AACA,iBAAA,OAAA,CAAA,MAAA;;AACA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,SAAA;AACA,WAFA,EAEA,IAFA,CAAA;AAGA,SALA,MAKA;AACA,iBAAA,OAAA,CAAA,MAAA;AACA;AACA,OAnBA;AAoBA;AAnFA;AAjDA,CAAA","sourcesContent":["<template>\r\n    <div class=\"layout\">\r\n        <the-title title=\"管理收货地址\"/>\r\n        <div class=\"container\">\r\n            <!-- <div class=\"address-list\">\r\n                <ul>\r\n                    <li class=\"address-item\" v-for=\"(list, index) in addressList\" :key=\"index\">\r\n                        <div class=\"address-info\">\r\n                            <div class=\"userinfo flex\">\r\n                                <span>{{list.username}}</span>\r\n                                <span>{{list.usermobile}}</span>\r\n                            </div>\r\n                            <div class=\"detail-addresss flex\">\r\n                                <img :src=\"list.pic\" alt=\"\">\r\n                                <span>{{list.detailaddress}}</span>\r\n                            </div>\r\n                            <div class=\"address-bottom flex\">\r\n                                <div class=\"select\">\r\n                                    <span>默认地址</span>\r\n                                </div>\r\n                                <div class=\"address-btn\">\r\n                                    <span>编辑</span>\r\n                                    <span>删除</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"add-address\">\r\n                <button @click=\"toAddressEdit\">添加新地址</button>\r\n            </div> -->\r\n            <van-address-list\r\n                v-model=\"chosenAddressId\"\r\n                :list=\"addressList\"\r\n                @add=\"onAdd\"\r\n                @edit=\"onEdit\"\r\n                @select=\"onSelect\"\r\n                />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport TheTitle from 'components/TheTitle.vue'\r\nimport Address from '../api/address'\r\nimport areaList from '../assets/js/area'\r\nimport { AddressList, Toast } from 'vant'\r\n\r\nexport default {\r\n    components: {\r\n        [AddressList.name]: AddressList,\r\n        [Toast.name]: Toast,\r\n        TheTitle\r\n    },\r\n    data(){\r\n        return{\r\n            chosenAddressId: '',\r\n            addressList: [],\r\n        }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n        console.log(to, from)\r\n        \r\n        if(from.path === '/order/checkout'){\r\n\r\n        }\r\n        next()\r\n    },\r\n    watch: {\r\n        // $route(to,from){\r\n        //     console.log(to, from);\r\n        // }\r\n        $route: {\r\n            deep: true,\r\n            handler(val, oldval){\r\n                console.log(val, oldval)\r\n            }\r\n        }\r\n    },\r\n    // beforeRouteEnter (to, from, next) {\r\n        // if(from.name){\r\n        //     Address.GetUserAddress({\r\n        //         \"SOURCE\": \"TEST\",\r\n        //         \"CREDENTIALS\": \"0\",\r\n        //         \"ADDRESS\": \"192.168.1.195\",\r\n        //         \"TERMINAL\": \"0\",\r\n        //         \"INDEX\": \"20170714\",\r\n        //         \"METHOD\": \"GetUserAddress\",\r\n        //         \"UserAccount\": \"test001\"\r\n        //     }).then(res => {\r\n        //         next(vm => vm.getAddressList(res))\r\n        //     })\r\n        // }\r\n    // },\r\n    created(){\r\n        this.init()\r\n    },\r\n    methods: {\r\n        // getAddressList(res){\r\n        //     console.log(res)\r\n        // },\r\n        init(){\r\n            Address.GetUserAddress({\r\n                \"SOURCE\": \"TEST\",\r\n                \"CREDENTIALS\": \"0\",\r\n                \"ADDRESS\": \"192.168.1.195\",\r\n                \"TERMINAL\": \"0\",\r\n                \"INDEX\": \"20170714\",\r\n                \"METHOD\": \"GetUserAddress\",\r\n                \"UserAccount\": \"test001\"\r\n            }).then(res => {\r\n                console.log(res.DATA[0])\r\n                let address = []\r\n                for(let i = 0; i < res.DATA[0].Address.length; i++){\r\n                    if(res.DATA[0].ConsigneeStatus[i] === 0){\r\n                        this.chosenAddressId = true\r\n                    }\r\n                    address.push({\r\n                        id: i,\r\n                        name: res.DATA[0].ConsigneeName[i],\r\n                        tel: res.DATA[0].ConsigneeTel[i],\r\n                        address: res.DATA[0].Address[i],\r\n                        ConsigneeStatus: res.DATA[0].ConsigneeStatus[i],\r\n                        ConsigneeProvince: res.DATA[0].ConsigneeProvince[i],\r\n                        ConsigneeCity: res.DATA[0].ConsigneeCity[i],\r\n                        ConsigneeCounty: res.DATA[0].ConsigneeCounty[i],\r\n                        ConsigneeAddress: res.DATA[0].ConsigneeAddress[i],\r\n                        ConsigneePostalcode: res.DATA[0].ConsigneePostalcode[i],\r\n                        RegisterTime: res.DATA[0].RegisterTime[i],\r\n                        addressID: res.DATA[0].ID[i]\r\n                    })\r\n                }\r\n                this.addressList = address\r\n                console.log(address)\r\n            })\r\n        },\r\n        onAdd() {\r\n            this.$router.push('./edit')\r\n        },\r\n        onEdit(item, index) {\r\n            this.$router.push({\r\n                name: 'AddressEdit',\r\n                query: {\r\n                    name: item.name,\r\n                    tel: item.tel,\r\n                    ConsigneeStatus: item.ConsigneeStatus,\r\n                    address: item.address,\r\n                    ConsigneeProvince: item.ConsigneeProvince,\r\n                    ConsigneeCity: item.ConsigneeCity,\r\n                    ConsigneeCounty: item.ConsigneeCounty,\r\n                    ConsigneeAddress: item.ConsigneeAddress,\r\n                    ConsigneeStatus: item.ConsigneeStatus,\r\n                    ConsigneePostalcode: item.ConsigneePostalcode,\r\n                    addressID: item.addressID\r\n                }  \r\n            })\r\n            console.log(item)\r\n        },\r\n        onSelect(item, index){\r\n            console.log(item)\r\n            Address.SetDefaultAddress({\r\n                \"SOURCE\": \"TEST\",\r\n                \"CREDENTIALS\": \"0\",\r\n                \"ADDRESS\": \"192.168.1.195\",\r\n                \"TERMINAL\": \"0\",\r\n                \"INDEX\": \"20170714\",\r\n                \"METHOD\": \"SetDefaultAddress\",\r\n                \"UserAccount\": \"test001\",\r\n                \"ID\": item.addressID\r\n            }).then(res => {\r\n                console.log(res)\r\n                if(res.DATA[0] === 1){\r\n                    Toast.success('设置成功')\r\n                    setTimeout(() => {\r\n                        this.$router.push('../user')\r\n                    }, 2000)\r\n                }else {\r\n                    Toast.success('设置失败')\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n    .layout{\r\n        height 100vh\r\n        background #f3f3f3\r\n    }\r\n    .container{\r\n        padding-top 51px\r\n        // padding-bottom 44px\r\n        // .address-list{\r\n        //     .address-item{\r\n        //         padding 0 10px\r\n        //         margin-bottom 10px\r\n        //         background #fff\r\n        //         font-size 15px\r\n        //         color #000\r\n        //         .flex{\r\n        //             display flex\r\n        //             justify-content space-between\r\n        //         }\r\n        //         span{\r\n        //             line-height 22px\r\n        //         }\r\n        //         .userinfo{\r\n        //             padding-top 15px\r\n        //             font-size 16px\r\n        //         }\r\n        //         .detail-addresss{\r\n        //             text-align left \r\n        //             padding 15px 0\r\n        //             img{\r\n        //                 width 20px\r\n        //                 height 20px\r\n        //                 margin-right 8px\r\n        //             }\r\n        //         }\r\n        //         .address-bottom{\r\n        //             align-items center\r\n        //             padding 10px 0\r\n        //             border-top 1px solid #eee\r\n        //             .address-btn span{\r\n        //                 display inline-block\r\n        //                 padding 4px 20px\r\n        //                 margin-left 20px\r\n        //                 border 1px solid #ccc\r\n        //                 border-radius 4px\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n        // .add-address{\r\n        //     position fixed\r\n        //     bottom 0\r\n        //     left 0\r\n        //     right 0\r\n        //     padding 0 10px\r\n        //     button{\r\n        //         width 100%\r\n        //         height 44px\r\n        //         line-height 44px\r\n        //         border none \r\n        //         background #FF3947\r\n        //         border-radius 30px\r\n        //         font-size 17px\r\n        //         color #fff\r\n        //     }\r\n        // }\r\n    }\r\n</style>\r\n\r\n<style lang=\"stylus\">\r\n    .van-address-item__name{\r\n        font-size 15px\r\n        margin-bottom 7px\r\n    }\r\n    .van-address-item__address{\r\n        font-size 13px\r\n        line-height 18px\r\n    }\r\n    .van-button--danger{\r\n        background #FF3947\r\n        border 1px solid #FF3947\r\n    }\r\n    .van-address-list{\r\n        padding-bottom 50px\r\n    }\r\n    .van-address-item{\r\n        margin-bottom 10px\r\n    }\r\n</style>\r\n\r\n\r\n"],"sourceRoot":"src/views"}]}